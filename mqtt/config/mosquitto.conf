# mosquitto.conf - Example Configuration File

# --- General Settings ---
# Enable persistent message storage.
persistence true
persistence_location /mosquitto/data/

# Specify the location of the PID file.
#pid_file /var/run/mosquitto/mosquitto.pid

# --- Logging Settings ---
# Log to a file (make sure the path exists or is writable).
log_dest file /mosquitto/log/mosquitto.log

# Log types you want to capture (choose as needed).
log_type error
log_type warning
log_type notice
log_type information

# Include connection messages.
connection_messages true
log_timestamp true

# --- Security and Access Control ---
# Allow anonymous access (set to false if you want to enforce authentication).
allow_anonymous true

# Uncomment and specify a password file if you want to enforce authentication.
# password_file /mosquitto/config/passwordfile

# (Optional) Configuration for ACL (Access Control List). Adjust or disable if you don't require ACLs.
# acl_file /mosquitto/config/aclfile

# --- Listener (Port) Settings ---
# Define a listener on the default MQTT port 1883.
# This is used by your Python MQTT Bridge
listener 1883
protocol mqtt 
# Explicitly state protocol (optional but good practice)

# --- ADDED/UNCOMMENTED WebSocket Listener ---
# Define a listener for WebSocket connections on port 9001 (a common choice)
# This will be used by your React frontend
listener 9001
protocol websockets 
# Specify the protocol for this listener

# --- Optional: Listener for MQTT over TLS (Port 8883) ---
# If you wanted secure MQTT (MQTTS), you would add something like:
# listener 8883
# protocol mqtt
# cafile /path/to/ca.crt
# certfile /path/to/server.crt
# keyfile /path/to/server.key

# --- Optional: Listener for WebSockets over TLS (WSS, Port 8084/8083) ---
# If you wanted secure WebSockets (WSS) for your React app, you would add:
# listener 8084 # Or another common WSS port like 8083
# protocol websockets
# cafile /path/to/ca.crt
# certfile /path/to/server.crt
# keyfile /path/to/server.key
# http_dir /path/to/web/files # Only if needed to serve static files for websockets page


# --- Additional Settings ---
# Uncomment to allow maximum messages to be retained or tweak other broker settings.
# max_inflight_messages 20
# message_size_limit 0

# End of mosquitto.conf